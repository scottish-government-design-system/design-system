@use "../../base/helpers/block-margins/block-margins";
@use "../../base/helpers/colours/colours" as colours2;
@use "../../base/helpers/first-child-no-margin/first-child-no-margin";
@use "../../base/helpers/functions/functions";
@use "../../base/helpers/headings/headings";
@use "../../base/helpers/last-child-no-margin/last-child-no-margin";
@use "../../base/helpers/media-query/media-query";
@use "../../base/helpers/spacing/spacing";
@use "../../base/settings/colours/colours";
@use "../../base/settings/type/type";

/*------------------------------------*\
    #SUMMARY LIST
\*------------------------------------*/

$summary-card-header-background-colour: colours.$ds_colour__background--primary--dim !default;

.ds_summary-list {
    @include block-margins.block-margins--bottom;
    list-style-type: none;
    margin-left: 0;

    &__key {
        font-weight: type.$bold;
    }

    &__key,
    &__value,
    &__actions {
        @include spacing.responsive-margin(1, bottom);
        display: block;
        overflow-wrap: break-word;
    }

    &__item {
        @include spacing.responsive-padding(2, top);
        @include spacing.responsive-padding(1, bottom, false, -0.0625rem);
        border-bottom: 0.0625rem solid colours.$ds_colour__border;
        margin: 0;
        position: relative;
    }

    &--no-border &__item {
        @include spacing.responsive-padding(1, bottom);
        border-bottom: 0;
    }

    &__value {
        // Remove top margin of first element and bottom margin of last element to avoid additional spacing
        @include first-child-no-margin.first-child-no-margin;
        @include last-child-no-margin.last-child-no-margin;

        // If first element is visually hidden supporting text then remove top margin of next sibling
        .visually-hidden:first-child + * {
            margin-top: 0;
        }
    }

    &__answer::before,
    &__answer::after {
        content: '';
    }

    &__actions-list {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;

        &-item {
            margin: 0;
            padding: 0;

            &:not(:first-child) {
                @include spacing.responsive-margin(1, left);
                @include spacing.responsive-padding(1, left, false, 0.0625rem);
                position: relative;

                &::before {
                    background: colours.$ds_colour__text--secondary;
                    content: '';
                    height: calc(1em - 0.125rem);
                    left: 0;
                    position: absolute;
                    top: calc(50% - (1em - 0.125rem) / 2);
                    width: 0.0625rem;
                }
            }
        }
    }

}

@include media-query.media-query(medium) {
    .ds_summary-list {
        border-collapse: collapse;
        display: table;
        width: 100%;

        &__item {
            display: table-row;
            padding: 0;
        }

        &__key,
        &__value,
        &__actions {
            display: table-cell;
            padding: 1rem 1rem 0.9375rem 1rem;
        }

        &--no-border &__item {
            .ds_summary-list__key,
            .ds_summary-list__value,
            .ds_summary-list__action {
                padding-bottom: 1rem;
            }
        }

        &__key {
            padding-left: 0;
            width: 50%;
        }

        &__value {
            width: 50%;
        }

        &__actions-list {
            justify-content: flex-end;
        }

        &__actions {
            padding-right: 0;
            text-align: right;
        }
    }
}

@include media-query.media-query(large) {
    .ds_summary-list {
        // Shorter keys modifier
        &--short-keys &__key {
            width: 30%;
        }
        &--short-keys &__value {
            width: 70%;
        }
    }
}

// Summary card
// [1] - Add visual separation of header in high contrast mode
.ds_summary-card {
    @include block-margins.block-margins;
    border: 0.0625rem solid colours.$ds_colour__border;

    &__header {
        @include spacing.responsive-padding(3, top, $tuning: -0.0625rem);
        @include spacing.responsive-padding(3, right, $tuning: -0.0625rem);
        @include spacing.responsive-padding(3, bottom, $tuning: -0.0625rem);
        @include spacing.responsive-padding(3, left, $tuning: -0.0625rem);
        align-items: flex-start;
        border-bottom: 0.0625rem solid $summary-card-header-background-colour; //[1]
        background: $summary-card-header-background-colour;
        display: flex;
        justify-content: space-between;

        // Stack on mobile
        @include media-query.media-query(medium-down) {
            flex-direction: column;
        }

        &-title {
            @include headings.h3-size;
            font-weight: type.$bold;
            margin: 0;
        }

        .ds_link {
            font-weight: type.$bold;
        }

        @include colours2.checkAndFixDescendantLinkColour(colours.$ds_colour__link, $summary-card-header-background-colour, 'summary card header');
    }

    &__actions-list {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        padding-left: 2rem;

        @include media-query.media-query(medium-down) {
            padding-left: 0;
            padding-top: 0.5rem;
        }

        &-item {
            margin: 0;
            padding: 0;

            &:not(:first-child) {
                @include spacing.responsive-margin(1, left);
                @include spacing.responsive-padding(1, left, false, 0.0625rem);
                position: relative;

                &::before {
                    background: colours.$ds_colour__text--secondary;
                    content: '';
                    height: calc(1em - 0.125rem);
                    left: 0;
                    position: absolute;
                    top: calc(50% - (1em - 0.125rem) / 2);
                    width: 0.0625rem;
                }
            }
        }
    }

    &__content {
        @include spacing.responsive-padding(1, top);
        @include spacing.responsive-padding(3, right, $tuning: -0.0625rem);
        @include spacing.responsive-padding(1, bottom, $tuning: -0.0625rem);
        @include spacing.responsive-padding(3, left, $tuning: -0.0625rem);
    }

    // Remove bottom margin and border
    .ds_summary-list {
        margin-bottom: 0;

        &__item:last-child {
            border-color: transparent;
        }
    }
}
